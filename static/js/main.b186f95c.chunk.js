(this["webpackJsonpreact_dynamic-list-of-posts"]=this["webpackJsonpreact_dynamic-list-of-posts"]||[]).push([[0],{21:function(t,e,n){},22:function(t,e,n){},23:function(t,e,n){},26:function(t,e,n){},30:function(t,e,n){},31:function(t,e,n){"use strict";n.r(e);var c=n(14),s=n.n(c),r=n(6),a=n(0),o=(n(21),n(22),n(23),n(1)),i=function(t){var e=t.posts,n=t.settingPostId,c=t.postId,s=function(t){n(t)};return Object(o.jsxs)("div",{className:"PostsList",children:[Object(o.jsx)("h2",{children:"Posts:"}),Object(o.jsx)("ul",{className:"PostsList__list","data-cy":"postDetails",children:e.map((function(t){return Object(o.jsxs)("li",{className:"PostsList__item",children:[Object(o.jsx)("div",{children:t.title}),c===t.id?Object(o.jsx)("button",{type:"button",className:"PostsList__button button",onClick:function(){s(0)},children:Object(o.jsx)("p",{children:"Close"})}):Object(o.jsx)("button",{type:"button",className:"PostsList__button button",onClick:function(){s(t.id)},children:Object(o.jsx)("p",{children:"Open"})})]},t.id)}))})]})},u=n(5),l=n(3),j=n.n(l),b=(n(26),n(8)),m="https://mate.academy/students-api",d=function(){var t=Object(u.a)(j.a.mark((function t(e){var n,c;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e){t.next=6;break}return t.next=3,fetch("".concat(m,"/posts?userId=").concat(e));case 3:t.t0=t.sent,t.next=9;break;case 6:return t.next=8,fetch("".concat(m,"/posts"));case 8:t.t0=t.sent;case 9:return n=t.t0,t.next=12,n.json();case 12:return c=t.sent,t.abrupt("return",c);case 14:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),p=function(){var t=Object(u.a)(j.a.mark((function t(){var e,n;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(m,"/users"));case 2:return e=t.sent,t.next=5,e.json();case 5:return n=t.sent,t.abrupt("return",n);case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),f=function(){var t=Object(u.a)(j.a.mark((function t(e){var n,c;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(m,"/posts/").concat(e));case 2:return n=t.sent,t.next=5,n.json();case 5:return c=t.sent,t.abrupt("return",c);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),h=function(){var t=Object(u.a)(j.a.mark((function t(e){var n,c;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(m,"/comments?postId=").concat(e));case 2:return n=t.sent,t.next=5,n.json();case 5:return c=t.sent,t.abrupt("return",c);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),O=function(){var t=Object(u.a)(j.a.mark((function t(e){var n,c;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(m,"/comments"),{method:"POST",body:JSON.stringify(e),headers:{"Content-type":"application/json; charset=UTF-8"}});case 2:return n=t.sent,t.next=5,n.json();case 5:return c=t.sent,t.abrupt("return",c);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),x=function(){var t=Object(u.a)(j.a.mark((function t(e){var n,c;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(m,"/comments/").concat(e),{method:"DELETE"});case 2:return n=t.sent,t.next=5,n.json();case 5:return c=t.sent,t.abrupt("return",c);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),v=function(t){var e=t.postId,n=t.requestComments,c=function(){var t=Object(u.a)(j.a.mark((function t(c){var s;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log(c),s={postId:e,name:c.name,email:c.email,body:c.body},t.next=4,O(s);case 4:n();case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(o.jsx)(o.Fragment,{children:Object(o.jsx)(b.c,{initialValues:{name:"",email:"",body:""},onSubmit:function(t,e){console.log({values:t,actions:e}),c(t),e.resetForm()},children:Object(o.jsxs)(b.b,{className:"NewCommentForm",children:[Object(o.jsx)("div",{className:"form-field",children:Object(o.jsx)("label",{htmlFor:"name",children:Object(o.jsx)(b.a,{id:"name",name:"name",placeholder:"Your name",className:"NewCommentForm__input"})})}),Object(o.jsx)("div",{className:"form-field",children:Object(o.jsx)("label",{htmlFor:"email",children:Object(o.jsx)(b.a,{id:"email",name:"email",placeholder:"Your email",className:"NewCommentForm__input"})})}),Object(o.jsx)("div",{className:"form-field",children:Object(o.jsx)("label",{htmlFor:"body",children:Object(o.jsx)(b.a,{as:"textarea",id:"body",name:"body",placeholder:"Type comment here",className:"NewCommentForm__input"})})}),Object(o.jsx)("button",{type:"submit",className:"NewCommentForm__submit-button button",children:"Submit"})]})})})},_=(n(30),function(t){var e=t.postId,n=Object(a.useState)(),c=Object(r.a)(n,2),s=c[0],i=c[1],u=Object(a.useState)([]),l=Object(r.a)(u,2),j=l[0],b=l[1],m=Object(a.useState)(!0),d=Object(r.a)(m,2),p=d[0],O=d[1],_=function(){h(e).then((function(t){return b(t)}))};Object(a.useEffect)((function(){f(e).then((function(t){return i(t)})),_()}),[e]);return Object(o.jsxs)("div",{className:"PostDetails",children:[Object(o.jsx)("h2",{children:"Post details:"}),Object(o.jsx)("section",{className:"PostDetails__post",children:Object(o.jsx)("p",{children:s&&s.title})}),Object(o.jsxs)("section",{className:"PostDetails__comments",children:[Object(o.jsx)("button",{type:"button",className:"button",onClick:function(){O((function(t){return!t}))},children:p?"Hide comments":"Show comments"}),p&&Object(o.jsx)("ul",{className:"PostDetails__list",children:j.map((function(t){return Object(o.jsxs)("li",{className:"PostDetails__list-item",children:[Object(o.jsx)("button",{type:"button",className:"PostDetails__remove-button button",onClick:function(){var e;e=t.id,x(e).then((function(){return _()}))},children:"X"}),Object(o.jsx)("p",{children:t.body})]},t.id)}))})]}),Object(o.jsx)("section",{children:Object(o.jsx)("div",{className:"PostDetails__form-wrapper",children:Object(o.jsx)(v,{postId:e,requestComments:_})})})]})}),N=function(){var t=Object(a.useState)(0),e=Object(r.a)(t,2),n=e[0],c=e[1],s=Object(a.useState)([]),u=Object(r.a)(s,2),l=u[0],j=u[1],b=Object(a.useState)([]),m=Object(r.a)(b,2),f=m[0],h=m[1],O=Object(a.useState)(0),x=Object(r.a)(O,2),v=x[0],N=x[1];return Object(a.useEffect)((function(){p().then((function(t){j(t)}))}),[]),Object(a.useEffect)((function(){d(n).then((function(t){h(t)}))}),[n]),Object(o.jsxs)("div",{className:"App",children:[Object(o.jsx)("header",{className:"App__header",children:Object(o.jsxs)("label",{children:["Select a user: \xa0",Object(o.jsxs)("select",{className:"App__user-selector",value:n,onChange:function(t){c(+t.target.value)},children:[Object(o.jsx)("option",{value:0,children:"All users"}),l.map((function(t){return Object(o.jsx)("option",{value:t.id,children:"".concat(t.name)},t.id)}))]})]})}),Object(o.jsxs)("main",{className:"App__main",children:[Object(o.jsx)("div",{className:"App__sidebar",children:Object(o.jsx)(i,{posts:f,settingPostId:function(t){N(t)},postId:v})}),!!v&&Object(o.jsx)("div",{className:"App__content",children:Object(o.jsx)(_,{postId:v})})]})]})};s.a.render(Object(o.jsx)(N,{}),document.getElementById("root"))}},[[31,1,2]]]);
//# sourceMappingURL=main.b186f95c.chunk.js.map